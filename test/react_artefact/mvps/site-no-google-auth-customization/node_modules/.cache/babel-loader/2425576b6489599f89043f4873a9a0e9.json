{"ast":null,"code":"import _regeneratorRuntime from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/src/containers/Authentication/index.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Token from '../../utils/token';\nvar AuthContext = React.createContext();\nexport var LOADING_STATUS = {\n  INITIAL: 'INITIAL',\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  FAILED: 'FAILED'\n};\nexport var AuthProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuthProvider, _React$Component);\n\n  function AuthProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuthProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isAuth: null,\n      googleMethod: null\n    };\n    _this.tokenManager = new Token();\n\n    _this.componentDidMount = function () {\n      var googleLoadTimer = setInterval(function () {\n        _this.setAuthLoadingStatus(LOADING_STATUS.INITIAL);\n\n        if (window.gapi) {\n          _this.setAuthLoadingStatus(LOADING_STATUS.LOADING);\n\n          _this.loadGoogleAPI(function () {\n            clearInterval(googleLoadTimer);\n\n            _this.setAuthLoadingStatus(LOADING_STATUS.LOADED, _this.loadAuth2Success);\n          });\n        }\n      }, 90);\n    };\n\n    _this.loadAuth2Success =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              token = _this.tokenManager.get();\n\n              if (!token) {\n                _this.logout();\n              } else {\n                _this.checkGoogle(token);\n              }\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.loadGoogleAPI = function (func) {\n      window.gapi.load('auth2', function () {\n        func();\n      });\n    };\n\n    _this.initializeGoogle = function () {\n      return window.gapi.auth2.init({\n        client_id: process.env.REACT_APP_GOOGLE_CLIENTID\n      });\n    };\n\n    _this.getGoogleAuth = function () {};\n\n    _this.checkGoogle =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(token) {\n        var googleAuth, googleUser, tokenId;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.initializeGoogle();\n\n              case 2:\n                googleAuth = _context2.sent;\n\n                if (googleAuth.isSignedIn.get()) {\n                  googleUser = googleAuth.currentUser.get();\n                  tokenId = googleUser.getAuthResponse().id_token;\n\n                  if (token === tokenId) {\n                    _this.login(tokenId, function () {\n                      _this.setState({\n                        googleAuth: googleAuth\n                      });\n                    });\n                  } else {\n                    _this.logout();\n                  }\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.loginGoogle =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var googleAuth;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              googleAuth = _this.state.googleAuth;\n\n              if (!(_this.state.googleMethod === LOADING_STATUS.LOADED)) {\n                _context3.next = 5;\n                break;\n              }\n\n              _context3.next = 4;\n              return _this.initializeGoogle();\n\n            case 4:\n              googleAuth = _context3.sent;\n\n            case 5:\n              _this.loginGoogleHelper(googleAuth);\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    _this.loginGoogleHelper = function (googleAuth) {\n      googleAuth.signIn({\n        scope: 'profile email'\n      }).then(function (googleUser) {\n        var tokenId = googleUser.getAuthResponse().id_token;\n\n        _this.login(tokenId);\n      });\n    };\n\n    _this.logoutGoogle =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var googleAuth;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              googleAuth = _this.state.googleAuth;\n\n              if (!(_this.state.googleMethod === LOADING_STATUS.LOADED)) {\n                _context4.next = 5;\n                break;\n              }\n\n              _context4.next = 4;\n              return _this.initializeGoogle();\n\n            case 4:\n              googleAuth = _context4.sent;\n\n            case 5:\n              googleAuth.signOut();\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    _this.login = function (token, callback) {\n      _this.tokenManager.set(token);\n\n      _this.setState({\n        isAuth: true\n      }, callback);\n    };\n\n    _this.logout = function () {\n      _this.tokenManager.clear(); // logout vendor\n\n\n      _this.logoutGoogle(); // end\n\n\n      _this.setState({\n        isAuth: false\n      });\n    };\n\n    _this.setAuthLoadingStatus = function (status, callback) {\n      _this.setState({\n        googleMethod: status\n      }, callback);\n    };\n\n    return _this;\n  }\n\n  _createClass(AuthProvider, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.googleMethod !== LOADING_STATUS.LOADED) {\n        return null;\n      }\n\n      return React.createElement(AuthContext.Provider, {\n        value: {\n          isAuth: this.state.isAuth,\n          login: this.login,\n          loginGoogle: this.loginGoogle,\n          logout: this.logout,\n          gapi: window.gapi\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.state.isAuth != null ? this.props.children : null);\n    }\n  }]);\n\n  return AuthProvider;\n}(React.Component);\nexport var AuthConsumer = AuthContext.Consumer;\nexport var withAuth = function withAuth(ComposedComponent) {\n  return (\n    /*#__PURE__*/\n    function (_React$Component2) {\n      _inherits(_class, _React$Component2);\n\n      function _class() {\n        _classCallCheck(this, _class);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n      }\n\n      _createClass(_class, [{\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return React.createElement(AuthConsumer, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          }, function (value) {\n            return value.isAuth ? React.createElement(ComposedComponent, Object.assign({}, _this2.props, value, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166\n              },\n              __self: this\n            })) : React.createElement(Redirect, {\n              to: \"/login\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 168\n              },\n              __self: this\n            });\n          });\n        }\n      }]);\n\n      return _class;\n    }(React.Component)\n  );\n};\nexport default AuthContext;","map":{"version":3,"sources":["/Users/affandhia/Documents/Affan/skripsi/ifml-angular-pwa/test/example_1_react/result/abs-bankaccount/src/containers/Authentication/index.js"],"names":["React","Redirect","Token","AuthContext","createContext","LOADING_STATUS","INITIAL","LOADING","LOADED","FAILED","AuthProvider","state","isAuth","googleMethod","tokenManager","componentDidMount","googleLoadTimer","setInterval","setAuthLoadingStatus","window","gapi","loadGoogleAPI","clearInterval","loadAuth2Success","token","get","logout","checkGoogle","func","load","initializeGoogle","auth2","init","client_id","process","env","REACT_APP_GOOGLE_CLIENTID","getGoogleAuth","googleAuth","isSignedIn","googleUser","currentUser","tokenId","getAuthResponse","id_token","login","setState","loginGoogle","loginGoogleHelper","signIn","scope","then","logoutGoogle","signOut","callback","set","clear","status","props","children","Component","AuthConsumer","Consumer","withAuth","ComposedComponent","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Token from '../../utils/token';\n\nconst AuthContext = React.createContext();\n\nexport const LOADING_STATUS = {\n  INITIAL: 'INITIAL',\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  FAILED: 'FAILED',\n};\n\nexport class AuthProvider extends React.Component {\n  state = { isAuth: null, googleMethod: null };\n  tokenManager = new Token();\n\n  componentDidMount = () => {\n    const googleLoadTimer = setInterval(() => {\n      this.setAuthLoadingStatus(LOADING_STATUS.INITIAL);\n      if (window.gapi) {\n        this.setAuthLoadingStatus(LOADING_STATUS.LOADING);\n        this.loadGoogleAPI(() => {\n          clearInterval(googleLoadTimer);\n          this.setAuthLoadingStatus(\n            LOADING_STATUS.LOADED,\n            this.loadAuth2Success\n          );\n        });\n      }\n    }, 90);\n  };\n\n  // GOOGLE Method\n\n  loadAuth2Success = async () => {\n    const token = this.tokenManager.get();\n\n    if (!token) {\n      this.logout();\n    } else {\n      this.checkGoogle(token);\n    }\n  };\n\n  loadGoogleAPI = func => {\n    window.gapi.load('auth2', () => {\n      func();\n    });\n  };\n\n  initializeGoogle = () => {\n    return window.gapi.auth2.init({\n      client_id: process.env.REACT_APP_GOOGLE_CLIENTID,\n    });\n  };\n\n  getGoogleAuth = () => {};\n\n  checkGoogle = async token => {\n    const googleAuth = await this.initializeGoogle();\n\n    if (googleAuth.isSignedIn.get()) {\n      const googleUser = googleAuth.currentUser.get();\n      const tokenId = googleUser.getAuthResponse().id_token;\n\n      if (token === tokenId) {\n        this.login(tokenId, () => {\n          this.setState({ googleAuth });\n        });\n      } else {\n        this.logout();\n      }\n    }\n  };\n\n  loginGoogle = async () => {\n    let googleAuth = this.state.googleAuth;\n\n    if (this.state.googleMethod === LOADING_STATUS.LOADED) {\n      googleAuth = await this.initializeGoogle();\n    }\n\n    this.loginGoogleHelper(googleAuth);\n  };\n\n  loginGoogleHelper = googleAuth => {\n    googleAuth\n      .signIn({\n        scope: 'profile email',\n      })\n      .then(googleUser => {\n        const tokenId = googleUser.getAuthResponse().id_token;\n\n        this.login(tokenId);\n      });\n  };\n\n  logoutGoogle = async () => {\n    let googleAuth = this.state.googleAuth;\n\n    if (this.state.googleMethod === LOADING_STATUS.LOADED) {\n      googleAuth = await this.initializeGoogle();\n    }\n\n    googleAuth.signOut();\n  };\n\n  // [END] GOOGLE Method\n\n  login = (token, callback) => {\n    this.tokenManager.set(token);\n\n    this.setState(\n      {\n        isAuth: true,\n      },\n      callback\n    );\n  };\n\n  logout = () => {\n    this.tokenManager.clear();\n\n    // logout vendor\n    this.logoutGoogle();\n    // end\n\n    this.setState({ isAuth: false });\n  };\n\n  setAuthLoadingStatus = (status, callback) => {\n    this.setState({ googleMethod: status }, callback);\n  };\n\n  render() {\n    if (this.state.googleMethod !== LOADING_STATUS.LOADED) {\n      return null;\n    }\n\n    return (\n      <AuthContext.Provider\n        value={{\n          isAuth: this.state.isAuth,\n          login: this.login,\n          loginGoogle: this.loginGoogle,\n          logout: this.logout,\n          gapi: window.gapi,\n        }}\n      >\n        {this.state.isAuth != null ? this.props.children : null}\n      </AuthContext.Provider>\n    );\n  }\n}\n\nexport const AuthConsumer = AuthContext.Consumer;\n\nexport const withAuth = ComposedComponent => {\n  return class extends React.Component {\n    render() {\n      return (\n        <AuthConsumer>\n          {value =>\n            value.isAuth ? (\n              <ComposedComponent {...this.props} {...value} />\n            ) : (\n              <Redirect to=\"/login\" />\n            )\n          }\n        </AuthConsumer>\n      );\n    }\n  };\n};\n\nexport default AuthContext;\n"]},"metadata":{},"sourceType":"module"}